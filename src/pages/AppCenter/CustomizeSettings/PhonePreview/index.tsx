import React from 'react';
import styles from './style.less';
import Icon from '@ant-design/icons';
import type { extractConfType } from '../../data';
import { Button, Input } from 'antd';

const svgCellular = () => (
  <svg width="17px" height="12px" viewBox="0 0 17 12">
    <g stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
      <g transform="translate(-294.000000, -17.000000)" fill="#000" fillRule="nonzero">
        <g transform="translate(21.000000, 14.000000)">
          <path d="M274,10.3333337 L275,10.3333337 C275.552285,10.3333337 276,10.7810489 276,11.3333337 L276,13.3333337 C276,13.8856184 275.552285,14.3333337 275,14.3333337 L274,14.3333337 C273.447715,14.3333337 273,13.8856184 273,13.3333337 L273,11.3333337 C273,10.7810489 273.447715,10.3333337 274,10.3333337 L274,10.3333337 Z M278.666667,8.33333367 L279.666667,8.33333367 C280.218951,8.33333367 280.666667,8.78104892 280.666667,9.33333367 L280.666667,13.3333337 C280.666667,13.8856184 280.218951,14.3333337 279.666667,14.3333337 L278.666667,14.3333337 C278.114382,14.3333337 277.666667,13.8856184 277.666667,13.3333337 L277.666667,9.33333367 C277.666667,8.78104892 278.114382,8.33333367 278.666667,8.33333367 Z M283.333333,6.00000033 L284.333333,6.00000033 C284.885618,6.00000033 285.333333,6.44771558 285.333333,7.00000033 L285.333333,13.3333337 C285.333333,13.8856184 284.885618,14.3333337 284.333333,14.3333337 L283.333333,14.3333337 C282.781049,14.3333337 282.333333,13.8856184 282.333333,13.3333337 L282.333333,7.00000033 C282.333333,6.44771558 282.781049,6.00000033 283.333333,6.00000033 Z M288,3.666667 L289,3.666667 C289.552285,3.666667 290,4.11438225 290,4.666667 L290,13.3333337 C290,13.8856184 289.552285,14.3333337 289,14.3333337 L288,14.3333337 C287.447715,14.3333337 287,13.8856184 287,13.3333337 L287,4.666667 C287,4.11438225 287.447715,3.666667 288,3.666667 L288,3.666667 Z"></path>
        </g>
      </g>
    </g>
  </svg>
);

const svgWifi = () => (
  <svg width="16px" height="12px" viewBox="0 0 16 12">
    <g stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
      <g transform="translate(-316.000000, -17.000000)" fill="#000" fillRule="nonzero">
        <g transform="translate(21.000000, 14.000000)">
          <path d="M302.667069,5.61515008 C304.891802,5.61524747 307.031463,6.46935828 308.643817,8.00095062 C308.765231,8.11919529 308.959299,8.11770373 309.078879,7.99760682 L310.23949,6.82727719 C310.300039,6.76636438 310.333797,6.68385445 310.3333,6.59800543 C310.332792,6.5121564 310.29807,6.4300466 310.236813,6.3698455 C306.0049,2.31761511 299.328569,2.31761511 295.096657,6.3698455 C295.035354,6.43000192 295.000572,6.51208679 295,6.59793593 C294.999442,6.68378508 295.03314,6.76632009 295.093645,6.82727719 L296.254591,7.99760682 C296.374094,8.11788495 296.568312,8.11937767 296.689653,8.00095062 C298.302212,6.46925775 300.442119,5.61514447 302.667069,5.61515008 L302.667069,5.61515008 Z M302.667069,9.42273393 C303.889415,9.42265909 305.068141,9.87661235 305.97421,10.6963869 C306.09676,10.8127317 306.289808,10.8102093 306.409272,10.6907025 L307.568544,9.52037286 C307.629594,9.45898574 307.663468,9.37570878 307.662605,9.28917317 C307.661707,9.20263756 307.626146,9.12006595 307.563859,9.05993174 C304.804697,6.49552319 300.531784,6.49552319 297.772622,9.05993174 C297.710297,9.12006522 297.674737,9.2026782 297.673905,9.28924177 C297.673102,9.37580535 297.707094,9.45907439 297.768272,9.52037286 L298.92721,10.6907025 C299.046673,10.8102093 299.239722,10.8127317 299.362272,10.6963869 C300.267742,9.87715403 301.445531,9.42323962 302.667069,9.42273393 L302.667069,9.42273393 Z M304.894921,12.2158092 C304.956921,12.1550129 304.991064,12.0713489 304.989291,11.9845705 C304.987517,11.897792 304.949983,11.8155907 304.885551,11.7573743 C303.604891,10.6751031 301.729248,10.6751031 300.448588,11.7573743 C300.384111,11.8155439 300.346516,11.8977193 300.344679,11.9844982 C300.342841,12.0712771 300.376925,12.1549675 300.438883,12.2158092 L302.444518,14.2378044 C302.503302,14.2972294 302.583446,14.3306727 302.667069,14.3306727 C302.750693,14.3306727 302.830837,14.2972294 302.88962,14.2378044 L304.894921,12.2158092 Z"></path>
        </g>
      </g>
    </g>
  </svg>
);

const svgBattery = () => (
  <svg width="25px" height="12px" viewBox="0 0 25 12">
    <g stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
      <g transform="translate(-336.000000, -17.000000)" fill="#000" fillRule="nonzero">
        <g transform="translate(21.000000, 14.000000)">
          <g transform="translate(315.333300, 3.333333)">
            <path d="M18.5814863,1.77635684e-15 C19.770178,1.77635684e-15 20.2012263,0.123767485 20.6357942,0.356176949 C21.0703621,0.588586413 21.4114136,0.929637855 21.6438231,1.36420577 C21.8762325,1.79877368 22,2.22982201 22,3.4185137 L22,7.91481963 C22,8.86577298 21.9207888,9.33183458 21.7701107,9.70271986 L21.6888519,9.88203538 L21.6438231,9.96912756 C21.4114136,10.4036955 21.0703621,10.7447469 20.6357942,10.9771564 C20.2012263,11.2095658 19.770178,11.3333333 18.5814863,11.3333333 L3.4185137,11.3333333 C2.22982201,11.3333333 1.79877368,11.2095658 1.36420577,10.9771564 C0.929637855,10.7447469 0.588586413,10.4036955 0.356176949,9.96912756 L0.311148098,9.88203538 L0.229889312,9.70271986 C0.0917677007,9.36274169 0.0136981632,8.94278897 0.0016457515,8.14268159 L0,3.4185137 C0,2.22982201 0.123767485,1.79877368 0.356176949,1.36420577 C0.588586413,0.929637855 0.929637855,0.588586413 1.36420577,0.356176949 C1.76980249,0.139261449 2.17233326,0.0169851846 3.19065175,0.0016457515 L18.5814863,1.77635684e-15 Z M18.5815932,0.999999994 L3.20571353,1.00153232 L2.85490596,1.01173559 C2.43582495,1.03145242 2.19859476,1.07695985 1.98962908,1.16434646 L1.83580463,1.23799015 C1.57550519,1.37719981 1.37719981,1.57550519 1.23799015,1.83580463 C1.08901989,2.11435478 1.02175783,2.38683845 1.0045877,3.02898468 L0.999999939,3.41816533 L1.00153232,8.1276198 L1.00563318,8.31033028 L1.02087783,8.62361793 C1.02417748,8.67041213 1.02784869,8.71462018 1.03187962,8.75642819 L1.06028716,8.97996433 C1.07655459,9.07882081 1.09584652,9.15942647 1.11784347,9.22680575 L1.14073026,9.28996234 L1.1994441,9.42276399 L1.23799015,9.49752871 C1.37719981,9.75782815 1.57550519,9.95613352 1.83580463,10.0953432 C2.0637093,10.2172279 2.28755294,10.2844155 2.71324112,10.3142223 L3.02919573,10.3287456 C3.08759185,10.3303065 3.14904477,10.3314534 3.21383695,10.3322102 L18.7861631,10.3322102 L19.1371046,10.3227971 C19.6627542,10.2986708 19.910968,10.2307707 20.1641954,10.0953432 C20.3724349,9.98397545 20.5409983,9.83478647 20.6713694,9.64629227 L20.778011,9.46927786 L20.8436493,9.32633 C20.9198518,9.13876216 20.9679122,8.88869667 20.988459,8.46715016 L20.9987201,8.11713473 L20.9999999,7.91481963 L20.9999999,3.4185137 L20.9954123,3.02919573 C20.9782422,2.38683845 20.9109801,2.11435478 20.7620099,1.83580463 C20.6228002,1.57550519 20.4244948,1.37719981 20.1641954,1.23799015 C19.8856452,1.08901989 19.6131615,1.02175783 18.9708043,1.00458774 L18.5815932,0.999999994 Z M18.2907431,2 C18.885089,2 19.1006132,2.06188374 19.3178971,2.17808847 C19.5351811,2.29429321 19.7057068,2.46481893 19.8219115,2.68210288 C19.9381163,2.89938684 20,3.11491101 20,3.70925685 L20,7.62407648 C20,8.21842233 19.9381163,8.43394649 19.8219115,8.65123045 C19.7057068,8.86851441 19.5351811,9.03904013 19.3178971,9.15524486 C19.1006132,9.27144959 18.885089,9.33333333 18.2907431,9.33333333 L3.70925685,9.33333333 C3.11491101,9.33333333 2.89938684,9.27144959 2.68210288,9.15524486 C2.46481893,9.03904013 2.29429321,8.86851441 2.17808847,8.65123045 C2.06188374,8.43394649 2,8.21842233 2,7.62407648 L2,3.70925685 C2,3.11491101 2.06188374,2.89938684 2.17808847,2.68210288 C2.29429321,2.46481893 2.46481893,2.29429321 2.68210288,2.17808847 C2.89938684,2.06188374 3.11491101,2 3.70925685,2 L18.2907431,2 Z M23,3.66666667 C23.8047311,4.00544318 24.328038,4.79353339 24.328038,5.66666667 C24.328038,6.53979995 23.8047311,7.32789015 23,7.66666667 L23,7.66666667 Z"></path>
          </g>
        </g>
      </g>
    </g>
  </svg>
);

const IconCullular = () => <Icon component={svgCellular} />;
const IconWifi = () => <Icon component={svgWifi} />;
const IconBattery = () => <Icon component={svgBattery} />;

interface PreviewPhoneProps {
  previewConfigs?: extractConfType;
}

const Preview: React.FC<PreviewPhoneProps> = (props) => {
  const { previewConfigs } = props;

  const splitLang = (str: string) => {
    const strNew = str.replace('｜', '|');
    return strNew.split('|')[0];
  };

  const previewContent = () => {
    return (
      <div
        className={styles.customPage}
        style={{ backgroundImage: `url(${previewConfigs?.bgUrl}` }}
      >
        <div className={styles.contentArea}>
          <div className={styles.logo}>
            <img
              src={previewConfigs?.logoUrl || '/uc/images/favicon.png'}
              alt={previewConfigs?.title}
            />
          </div>
          <div className={styles.title}>{splitLang(previewConfigs?.title || '')}</div>
          <div className={styles.validationTip}>
            {splitLang(previewConfigs?.validationTip || '')}
          </div>
          <div className={styles.input}>
            <Input placeholder={splitLang(previewConfigs?.validationTip || '')} />
          </div>
          <div className={styles.btn}>
            <Button
              type="primary"
              style={{
                backgroundColor: previewConfigs?.curColor,
                borderColor: previewConfigs?.curColor,
              }}
            >
              提取
            </Button>
          </div>
          <div className={styles.tip}>{splitLang(previewConfigs?.tip || '')}</div>
        </div>
      </div>
    );
  };

  return (
    <div className={styles.phone}>
      <div className={styles.top}>&nbsp;</div>
      <div className={styles.left}>&nbsp;</div>
      <div className={styles.bottom}>&nbsp;</div>
      <div className={styles.right}>&nbsp;</div>
      <div className={styles.container}>
        <div className={styles.navigationBar}>
          <div className={styles.statusBar}>
            <div className={styles.barLeft}>数犀科技</div>
            <div className={styles.barRight}>
              <IconCullular />
              <IconWifi />
              <IconBattery />
            </div>
          </div>
        </div>
        <div className={styles.content}>{previewConfigs ? previewContent() : null}</div>
      </div>
    </div>
  );
};

export default Preview;
